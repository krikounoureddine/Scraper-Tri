<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scraper Tri - Processus de Gestion des Déchets</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .description {
            color: #7f8c8d;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn.reset {
            background: #e74c3c;
        }
        
        .btn.reset:hover {
            background: #c0392b;
        }
        
        .btn.auto {
            background: #2ecc71;
        }
        
        .btn.auto:hover {
            background: #27ae60;
        }
        
        .flow-container {
            width: 100%;
            overflow-x: auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .flow-diagram {
            display: flex;
            flex-direction: column;
            min-width: 2000px;
            position: relative;
            height: 700px;
        }
        
        .flow-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .node {
            width: 180px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 2;
            position: relative;
            text-align: center;
        }
        
        .node:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .node.active {
            box-shadow: 0 0 0 3px #3498db, 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .node h3 {
            font-size: 14px;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .node p {
            font-size: 12px;
            color: #7f8c8d;
            line-height: 1.4;
        }
        
        .node.interface {
            background: #e1f5fe;
            border-left: 5px solid #01579b;
        }
        
        .node.scraping {
            background: #f3e5f5;
            border-left: 5px solid #4a148c;
        }
        
        .node.traitement {
            background: #e8f5e8;
            border-left: 5px solid #1b5e20;
        }
        
        .node.export {
            background: #fff3e0;
            border-left: 5px solid #e65100;
        }
        
        .node.erreur {
            background: #ffebee;
            border-left: 5px solid #c62828;
        }
        
        .connections {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .connection {
            position: absolute;
            background: #7f8c8d;
            height: 2px;
            transform-origin: 0 0;
            z-index: 1;
            opacity: 0.3;
            transition: all 0.3s;
        }
        
        .connection.active {
            opacity: 0.8;
            background: #e74c3c;
            height: 3px;
        }
        
        .connection.dashed {
            stroke-dasharray: 5,5;
            border-top: 2px dashed #7f8c8d;
            background: transparent;
            height: 0;
        }
        
        .connection.dashed.active {
            border-top: 3px dashed #e74c3c;
        }
        
        .node-info {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: none;
            width: 100%;
        }
        
        .node-info.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .node-info h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .node-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .inputs, .outputs {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
        
        .inputs h3, .outputs h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .inputs ul, .outputs ul {
            list-style-type: none;
        }
        
        .inputs li, .outputs li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            color: #7f8c8d;
        }
        
        .inputs li:last-child, .outputs li:last-child {
            border-bottom: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 30px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .flow-path {
            display: none;
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 100%;
        }
        
        .flow-path.active {
            display: block;
        }
        
        .path-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .path-step {
            background: #3498db;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .scroll-hint {
            text-align: center;
            margin-top: 10px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .node-details {
                grid-template-columns: 1fr;
            }
            
            .flow-diagram {
                height: 900px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Scraper Tri - Processus de Gestion des Déchets</h1>
            <p class="description">
                Ce diagramme interactif illustre le flux complet de l'application Scraper Tri, depuis l'interface utilisateur jusqu'à l'export des données.
                Cliquez sur un nœud pour voir ses relations avec les autres éléments du système.
            </p>
        </header>
        
        <div class="controls">
            <button class="btn" id="showAll">Afficher toutes les connexions</button>
            <button class="btn auto" id="showPath">Simuler flux complet</button>
            <button class="btn reset" id="resetAll">Réinitialiser l'affichage</button>
        </div>
        
        <div class="flow-container">
            <div class="scroll-hint">← Faites défiler horizontalement pour voir tout le diagramme →</div>
            <div class="flow-diagram" id="flowDiagram">
                <!-- Ligne 1: Démarrage et Interface -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px;">
                    <div class="node interface" data-id="node-z">
                        <h3>Démarrage Application</h3>
                    </div>
                    <div class="node interface" data-id="node-a">
                        <h3>Interface Utilisateur Tkinter</h3>
                    </div>
                    <div class="node interface" data-id="node-b">
                        <h3>Choix du type de recherche</h3>
                    </div>
                </div>
                
                <!-- Ligne 2: Recherche Par Catégorie -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 300px;">
                    <div class="node interface" data-id="node-c">
                        <h3>Interface: Choix groupe déchets</h3>
                    </div>
                    <div class="node scraping" data-id="node-d">
                        <h3>Selenium: Sélection auto déchets</h3>
                    </div>
                </div>
                
                <!-- Ligne 3: Recherche Multi-Catégorie -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 300px;">
                    <div class="node scraping" data-id="node-f">
                        <h3>Boucle automatique 11 groupes</h3>
                    </div>
                    <div class="node scraping" data-id="node-g">
                        <h3>Selenium: Sélection multiple déchets</h3>
                    </div>
                </div>
                
                <!-- Ligne 4: Recherche Avancée -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 300px;">
                    <div class="node interface" data-id="node-h">
                        <h3>Interface avancée</h3>
                        <p>Plateforme centre, Nouveaux déchets</p>
                    </div>
                </div>
                
                <!-- Ligne 5: Saisie adresse et validation -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 800px;">
                    <div class="node interface" data-id="node-e">
                        <h3>Interface: Saisie adresse</h3>
                    </div>
                    <div class="node scraping" data-id="node-i">
                        <h3>Bouton Valider Adresse</h3>
                    </div>
                </div>
                
                <!-- Ligne 6: Extraction et parsing -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 1100px;">
                    <div class="node scraping" data-id="node-j">
                        <h3>Extraction URLs XML</h3>
                        <p>via Performance API</p>
                    </div>
                    <div class="node interface" data-id="node-k">
                        <h3>Interface: Sélection type XML</h3>
                    </div>
                    <div class="node scraping" data-id="node-l">
                        <h3>Requête HTTP GET</h3>
                        <p>+ gestion cookies</p>
                    </div>
                    <div class="node scraping" data-id="node-m">
                        <h3>Parsing XML/HTML</h3>
                        <p>BeautifulSoup</p>
                    </div>
                </div>
                
                <!-- Ligne 7: Traitement des données -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 1700px;">
                    <div class="node traitement" data-id="node-n">
                        <h3>Création objets</h3>
                        <p>CentresDechets</p>
                    </div>
                    <div class="node traitement" data-id="node-o">
                        <h3>Insertion BDD SQLite</h3>
                        <p>avec anti-doublons</p>
                    </div>
                    <div class="node traitement" data-id="node-p">
                        <h3>Mise à jour interface</h3>
                    </div>
                </div>
                
                <!-- Ligne 8: Export et visualisation -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 1700px;">
                    <div class="node export" data-id="node-q">
                        <h3>Export multi-format</h3>
                        <p>JSON, CSV, Excel, Word</p>
                    </div>
                    <div class="node export" data-id="node-r">
                        <h3>Carte interactive Folium</h3>
                    </div>
                </div>
                
                <!-- Ligne 9: Gestion des erreurs -->
                <div class="flow-row" style="justify-content: flex-start; gap: 100px; margin-left: 1300px; margin-top: 100px;">
                    <div class="node erreur" data-id="node-s">
                        <h3>Gestion erreurs HTTP/Connexion</h3>
                    </div>
                    <div class="node erreur" data-id="node-t">
                        <h3>Gestion erreurs Parsing</h3>
                    </div>
                    <div class="node erreur" data-id="node-u">
                        <h3>Affichage erreur interface</h3>
                    </div>
                </div>
                
                <!-- Connexions seront ajoutées ici par JavaScript -->
                <div class="connections" id="connections"></div>
            </div>
        </div>
        
        <div class="flow-path" id="flowPath">
            <h3>Flux d'exécution simulé</h3>
            <div class="path-steps" id="pathSteps"></div>
        </div>
        
        <div class="node-info" id="nodeInfo">
            <h2 id="nodeTitle">Nom du nœud</h2>
            <div class="node-details">
                <div class="inputs">
                    <h3>Entrées / Déclencheurs</h3>
                    <ul id="inputList"></ul>
                </div>
                <div class="outputs">
                    <h3>Sorties / Résultats</h3>
                    <ul id="outputList"></ul>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e1f5fe; border: 2px solid #01579b;"></div>
                <span>Interface Utilisateur</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #f3e5f5; border: 2px solid #4a148c;"></div>
                <span>Scraping et Interaction</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e8f5e8; border: 2px solid #1b5e20;"></div>
                <span>Traitement des Données</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #fff3e0; border: 2px solid #e65100;"></div>
                <span>Export et Visualisation</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #ffebee; border: 2px solid #c62828;"></div>
                <span>Gestion des Erreurs</span>
            </div>
        </div>
        
        <footer>
            <p>Scraper Tri - Processus de Gestion des Déchets - Tous droits réservés</p>
        </footer>
    </div>

    <script>
        // Définition des connexions entre les nœuds
        const connections = [
            { from: 'node-z', to: 'node-a', type: 'solid' },
            { from: 'node-a', to: 'node-b', type: 'solid' },
            { from: 'node-b', to: 'node-c', type: 'solid' },
            { from: 'node-c', to: 'node-d', type: 'solid' },
            { from: 'node-d', to: 'node-e', type: 'solid' },
            { from: 'node-b', to: 'node-f', type: 'solid' },
            { from: 'node-f', to: 'node-g', type: 'solid' },
            { from: 'node-g', to: 'node-e', type: 'solid' },
            { from: 'node-b', to: 'node-h', type: 'solid' },
            { from: 'node-h', to: 'node-e', type: 'solid' },
            { from: 'node-e', to: 'node-i', type: 'solid' },
            { from: 'node-i', to: 'node-j', type: 'solid' },
            { from: 'node-j', to: 'node-k', type: 'solid' },
            { from: 'node-k', to: 'node-l', type: 'solid' },
            { from: 'node-l', to: 'node-m', type: 'solid' },
            { from: 'node-m', to: 'node-n', type: 'solid' },
            { from: 'node-m', to: 'node-o', type: 'solid' },
            { from: 'node-m', to: 'node-p', type: 'solid' },
            { from: 'node-n', to: 'node-q', type: 'solid' },
            { from: 'node-o', to: 'node-q', type: 'solid' },
            { from: 'node-n', to: 'node-r', type: 'solid' },
            { from: 'node-l', to: 'node-s', type: 'dashed' },
            { from: 'node-m', to: 'node-t', type: 'dashed' },
            { from: 'node-s', to: 'node-u', type: 'dashed' },
            { from: 'node-t', to: 'node-u', type: 'dashed' }
        ];

        // Définition des informations pour chaque nœud
        const nodeInfo = {
            'node-z': {
                title: 'Démarrage Application',
                inputs: ['Lancement de l\'application par l\'utilisateur'],
                outputs: ['Initialisation de l\'interface Tkinter']
            },
            'node-a': {
                title: 'Interface Utilisateur Tkinter',
                inputs: ['Initialisation de l\'application'],
                outputs: ['Affichage des options de recherche']
            },
            'node-b': {
                title: 'Choix du type de recherche',
                inputs: ['Interaction utilisateur avec l\'interface'],
                outputs: [
                    'Recherche Par Catégorie',
                    'Recherche Multi-Catégorie',
                    'Recherche Avancée'
                ]
            },
            'node-c': {
                title: 'Interface: Choix groupe déchets',
                inputs: ['Sélection de Recherche Par Catégorie'],
                outputs: ['Groupe de déchets sélectionné']
            },
            'node-d': {
                title: 'Selenium: Sélection auto déchets',
                inputs: ['Groupe de déchets sélectionné'],
                outputs: ['Sélection automatique via WebDriver']
            },
            'node-f': {
                title: 'Boucle automatique 11 groupes',
                inputs: ['Sélection de Recherche Multi-Catégorie'],
                outputs: ['Parcours séquentiel des 11 groupes de déchets']
            },
            'node-g': {
                title: 'Selenium: Sélection multiple déchets',
                inputs: ['Parcours des groupes par la boucle automatique'],
                outputs: ['Sélection automatique de plusieurs types de déchets']
            },
            'node-h': {
                title: 'Interface avancée',
                inputs: ['Sélection de Recherche Avancée'],
                outputs: [
                    'Paramètres de plateforme sélectionnés',
                    'Nouveaux déchets spécifiés'
                ]
            },
            'node-e': {
                title: 'Interface: Saisie adresse',
                inputs: [
                    'Sélection de déchets (Recherche Par Catégorie)',
                    'Sélection multiple (Recherche Multi-Catégorie)',
                    'Paramètres avancés (Recherche Avancée)'
                ],
                outputs: ['Adresse saisie prête pour validation']
            },
            'node-i': {
                title: 'Bouton Valider Adresse',
                inputs: ['Adresse saisie dans l\'interface'],
                outputs: ['Lancement de l\'extraction des URLs']
            },
            'node-j': {
                title: 'Extraction URLs XML',
                inputs: ['Validation de l\'adresse'],
                outputs: ['Liste d\'URLs des centres de déchets']
            },
            'node-k': {
                title: 'Interface: Sélection type XML',
                inputs: ['URLs extraites des centres'],
                outputs: ['Type de données sélectionné pour extraction']
            },
            'node-l': {
                title: 'Requête HTTP GET + cookies',
                inputs: ['Type XML sélectionné'],
                outputs: [
                    'Données brutes récupérées depuis les URLs',
                    'Gestion des erreurs HTTP/Connexion'
                ]
            },
            'node-m': {
                title: 'Parsing XML/HTML - BeautifulSoup',
                inputs: ['Données brutes des requêtes HTTP'],
                outputs: [
                    'Données structurées pour création d\'objets',
                    'Données prêtes pour insertion en base',
                    'Informations pour mise à jour interface',
                    'Gestion des erreurs de parsing'
                ]
            },
            'node-n': {
                title: 'Création objets CentresDechets',
                inputs: ['Données parsées du XML/HTML'],
                outputs: [
                    'Objets centres prêts pour export',
                    'Données pour génération de carte'
                ]
            },
            'node-o': {
                title: 'Insertion BDD SQLite',
                inputs: ['Données parsées du XML/HTML'],
                outputs: ['Données stockées avec gestion des doublons']
            },
            'node-p': {
                title: 'Mise à jour interface',
                inputs: ['Données parsées du XML/HTML'],
                outputs: ['Affichage des résultats à l\'utilisateur']
            },
            'node-q': {
                title: 'Export multi-format',
                inputs: [
                    'Objets centres créés',
                    'Données de la base SQLite'
                ],
                outputs: ['Fichiers JSON, CSV, Excel, Word générés']
            },
            'node-r': {
                title: 'Carte interactive Folium',
                inputs: ['Objets centres créés'],
                outputs: ['Carte HTML interactive des centres de déchets']
            },
            'node-s': {
                title: 'Gestion erreurs HTTP/Connexion',
                inputs: ['Erreurs lors des requêtes HTTP'],
                outputs: ['Transmission des erreurs à l\'interface']
            },
            'node-t': {
                title: 'Gestion erreurs Parsing',
                inputs: ['Erreurs lors du parsing des données'],
                outputs: ['Transmission des erreurs à l\'interface']
            },
            'node-u': {
                title: 'Affichage erreur interface',
                inputs: [
                    'Erreurs HTTP/Connexion',
                    'Erreurs de parsing'
                ],
                outputs: ['Message d\'erreur affiché à l\'utilisateur']
            }
        };

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            const nodes = document.querySelectorAll('.node');
            const connectionsContainer = document.getElementById('connections');
            const nodeInfoContainer = document.getElementById('nodeInfo');
            const nodeTitle = document.getElementById('nodeTitle');
            const inputList = document.getElementById('inputList');
            const outputList = document.getElementById('outputList');
            const showAllBtn = document.getElementById('showAll');
            const resetAllBtn = document.getElementById('resetAll');
            const showPathBtn = document.getElementById('showPath');
            const flowPath = document.getElementById('flowPath');
            const pathSteps = document.getElementById('pathSteps');
            
            // Créer les connexions visuelles
            function drawConnections() {
                connectionsContainer.innerHTML = '';
                
                connections.forEach(conn => {
                    const fromNode = document.querySelector(`[data-id="${conn.from}"]`);
                    const toNode = document.querySelector(`[data-id="${conn.to}"]`);
                    
                    if (fromNode && toNode) {
                        const fromRect = fromNode.getBoundingClientRect();
                        const toRect = toNode.getBoundingClientRect();
                        const containerRect = connectionsContainer.getBoundingClientRect();
                        
                        // Calcul des positions relatives
                        const fromX = fromRect.left + fromRect.width/2 - containerRect.left;
                        const fromY = fromRect.top + fromRect.height/2 - containerRect.top;
                        const toX = toRect.left + toRect.width/2 - containerRect.left;
                        const toY = toRect.top + toRect.height/2 - containerRect.top;
                        
                        // Calcul de la distance et de l'angle
                        const dx = toX - fromX;
                        const dy = toY - fromY;
                        const length = Math.sqrt(dx * dx + dy * dy);
                        const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                        
                        // Création de la connexion
                        const connection = document.createElement('div');
                        connection.className = `connection ${conn.type === 'dashed' ? 'dashed' : ''}`;
                        connection.style.width = `${length}px`;
                        connection.style.left = `${fromX}px`;
                        connection.style.top = `${fromY}px`;
                        connection.style.transform = `rotate(${angle}deg)`;
                        connection.dataset.from = conn.from;
                        connection.dataset.to = conn.to;
                        
                        connectionsContainer.appendChild(connection);
                    }
                });
            }
            
            // Initialiser les connexions
            drawConnections();
            
            // Recalculer les connexions lors du redimensionnement
            window.addEventListener('resize', drawConnections);
            
            const allConnections = document.querySelectorAll('.connection');
            
            // Gestion des clics sur les nœuds
            nodes.forEach(node => {
                node.addEventListener('click', function() {
                    const nodeId = this.dataset.id;
                    
                    // Réinitialiser tous les nœuds et connexions
                    resetAll();
                    
                    // Activer le nœud cliqué
                    this.classList.add('active');
                    
                    // Activer les connexions liées à ce nœud
                    allConnections.forEach(conn => {
                        if (conn.dataset.from === nodeId || conn.dataset.to === nodeId) {
                            conn.classList.add('active');
                        }
                    });
                    
                    // Afficher les informations du nœud
                    if (nodeInfo[nodeId]) {
                        nodeTitle.textContent = nodeInfo[nodeId].title;
                        
                        inputList.innerHTML = '';
                        nodeInfo[nodeId].inputs.forEach(input => {
                            const li = document.createElement('li');
                            li.textContent = input;
                            inputList.appendChild(li);
                        });
                        
                        outputList.innerHTML = '';
                        nodeInfo[nodeId].outputs.forEach(output => {
                            const li = document.createElement('li');
                            li.textContent = output;
                            outputList.appendChild(li);
                        });
                        
                        nodeInfoContainer.classList.add('active');
                    }
                });
            });
            
            // Fonction pour réinitialiser l'affichage
            function resetAll() {
                nodes.forEach(n => n.classList.remove('active'));
                allConnections.forEach(c => c.classList.remove('active'));
                nodeInfoContainer.classList.remove('active');
                flowPath.classList.remove('active');
                pathSteps.innerHTML = '';
            }
            
            // Bouton pour afficher toutes les connexions
            showAllBtn.addEventListener('click', function() {
                resetAll();
                allConnections.forEach(c => c.classList.add('active'));
            });
            
            // Bouton pour réinitialiser
            resetAllBtn.addEventListener('click', resetAll);
            
            // Bouton pour simuler le flux complet
            showPathBtn.addEventListener('click', function() {
                resetAll();
                flowPath.classList.add('active');
                pathSteps.innerHTML = '';
                
                // Définir le chemin de simulation
                const simulationPath = [
                    'node-z', 'node-a', 'node-b', 'node-c', 'node-d', 'node-e',
                    'node-i', 'node-j', 'node-k', 'node-l', 'node-m', 'node-n',
                    'node-o', 'node-p', 'node-q', 'node-r'
                ];
                
                // Animer le chemin
                simulatePath(simulationPath, 0);
            });
            
            // Fonction pour simuler le chemin avec animation
            function simulatePath(path, index) {
                if (index >= path.length) return;
                
                const nodeId = path[index];
                const node = document.querySelector(`[data-id="${nodeId}"]`);
                
                // Activer le nœud
                node.classList.add('active');
                
                // Activer les connexions entrantes
                if (index > 0) {
                    const prevNodeId = path[index-1];
                    allConnections.forEach(conn => {
                        if (conn.dataset.from === prevNodeId && conn.dataset.to === nodeId) {
                            conn.classList.add('active');
                        }
                    });
                }
                
                // Ajouter l'étape au chemin affiché
                const step = document.createElement('div');
                step.className = 'path-step';
                step.textContent = nodeInfo[nodeId].title;
                pathSteps.appendChild(step);
                
                // Passer à l'étape suivante après un délai
                setTimeout(() => {
                    simulatePath(path, index + 1);
                }, 800);
            }
        });
    </script>
</body>
</html>